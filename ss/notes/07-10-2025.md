### Buffer Overflows

#### What is a BO?

C stores data in 4 places:

- stack - local variables
- heap - dynamic memory
- data - initialized global variables
- bss - uninitalized global variables

Buffer - contiguous chunk of memory in space (of the same data type)

BO occurs when a program writes (or reads) outside the allocated space for the buffer, normally after the end (but can also happen before the beginning of the buffer).

#### Cause

Languages like C/C++:

- does not verify if data overflows the limit of a buffer/array/vector
- programmers make assumptions like the user will never input more than 1000 characters

Several contributing factors:

- large number of unsafe string operations (gets(), strcpy(), sprintf(), scanf())
- unsafe programming practices taught in classes and classical books

#### What happens

Program can:

- be unstable
- crash
- proceed normally

Side effects depend on:

- how much data is written after the end of the buffer
- what data (if any) is overwritten
- whether the program tries to read overwritten data
- what data replaces the memory that got overwritten

#### Why is it a security problem

- Can be exploited to let an attacker execute its own code
- Code might be modified
- Data may be altered
- Data may be read creating an information leak

How to prevent? Always do bound checking, as problems may only arise when you cannot control input.  
Avoid unsafe functions that don't do bound checking (gets() vs fgets() that only saves in buffer a given size).

### Heap Overflows
